<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Dog Maze Game</title>
  <style>
    body { display: flex; justify-content: center; align-items: center; height: 100vh; background: #222; margin: 0; }
    canvas { background: #fff; border: 3px solid #000; }
  </style>
</head>
<body>
  <canvas id="game" width="800" height="800"></canvas>

  <script>
    const canvas = document.getElementById("game");
    const ctx = canvas.getContext("2d");

    const rows = 40, cols = 40;
    const tileSize = canvas.width / cols;

    let maze = Array.from({ length: rows }, () => Array(cols).fill(1));

    function shuffle(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
      return array;
    }

    function carve(x, y) {
      maze[y][x] = 0;
      for (const [dx, dy] of shuffle([[0,-2],[0,2],[-2,0],[2,0]])) {
        const nx = x + dx, ny = y + dy;
        if (ny > 0 && ny < rows-1 && nx > 0 && nx < cols-1 && maze[ny][nx] === 1) {
          maze[y + dy/2][x + dx/2] = 0;
          carve(nx, ny);
        }
      }
    }

    function generateMaze() { carve(1,1); }
    generateMaze();

    let player = { x: 1, y: 1 };
    const exit = { x: cols-3, y: rows-3 };

    function drawMaze() {
      ctx.clearRect(0,0,canvas.width,canvas.height);

      for (let y = 0; y < rows; y++) {
        for (let x = 0; x < cols; x++) {
          ctx.fillStyle = maze[y][x] === 1 ? "#000" : "#fff";
          ctx.fillRect(x * tileSize, y * tileSize, tileSize, tileSize);
        }
      }

      // Exit (treasure chest emoji)
      ctx.font = `${tileSize * 0.9}px serif`;
      ctx.textAlign = "center";
      ctx.textBaseline = "middle";
      ctx.fillText("âœ¨", exit.x * tileSize + tileSize/2, exit.y * tileSize + tileSize/2);

      // Player (dog emoji)
      ctx.fillText("ğŸ¶", player.x * tileSize + tileSize/2, player.y * tileSize + tileSize/2);
    }

    function canMove(x, y) {
      return maze[y] && maze[y][x] === 0 || (x === exit.x && y === exit.y);
    }

    document.addEventListener("keydown", (e) => {
      let { x, y } = player;
      if (e.key === "ArrowUp") y--;
      if (e.key === "ArrowDown") y++;
      if (e.key === "ArrowLeft") x--;
      if (e.key === "ArrowRight") x++;

      if (canMove(x,y)) {
        player.x = x;
        player.y = y;
      }

      if (player.x === exit.x && player.y === exit.y) {
        setTimeout(() => alert("ğŸ¶ğŸ‰ You found the treasure!"), 100);
      }

      drawMaze();
    });

    drawMaze();
  </script>
</body>
</html>
